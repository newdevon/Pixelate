<!doctype html>
<html>
	<style>
		table {
			border-collapse: collapse;
			border:1px solid black;
		}

		td {
			height:100px;
			width:100px;
			border:1px solid black;
			text-align: center;
			background-color: "white";
		}

	</style>

	<script>

		function paint(event) {
			let x = document.getElementById(event.target.id);
			let colorPicker = document.getElementById("cw").value;
			x.addEventListener("click", function(event){x.style.backgroundColor=colorPicker});
			console.log(colorPicker);
		}

		function fillPaint() {
			let colorPicker = document.getElementById("cw").value;
			let x = Array.from(document.getElementsByTagName("td")); //can't do table because cells bg color overwrites.
			//getElementByTagName creates an HTML Collection, an array-like object, but not an array
			//Array.from changes the HTML Collection into an array
			x.forEach(function(element){element.style.backgroundColor= colorPicker});
			//Don't do the for loop below because it might also bring up other properties that you don't want with the HTML Collection
			// for(let i=0; i<x.length; i++) {
			// 	x[i].style.backgroundColor = colorPicker;
			// 	console.log(x);
			// }
		}

		function fillUncolored() {
			let colorPicker = document.getElementById("cw").value;
			let x = Array.from(document.getElementsByTagName("td"));
			x.forEach(function(element){
				if(element.style.backgroundColor === "white") {
					element.style.backgroundColor= colorPicker;
				}
				console.log(element);
			});
		}

		function fillWhite() {
			let x = Array.from(document.getElementsByTagName("td"));
			x.forEach(function(element){element.style.backgroundColor= "white";});
		}

		function clickAndHover(event) {
			let colorPicker = document.getElementById("cw").value;
			let myTable = document.getElementById("table");
			myTable.addEventListener("mousedown", function(event) {
				//for each row
				let rows = document.getElementsByTagName("tr");
				for(let row of rows) {
					//for each column
					let cols = row.getElementsByTagName("td");
					for(let i = 0; i < cols.length; i++) {
						cols[i].onmouseover=function() {cols[i].style.backgroundColor=colorPicker;}
					}
				}
		});
			//let x = document.getElementById(event.target.id);
			//x.addEventListener("mousedown", function(event){x.style.backgroundColor=colorPicker});
			//x.style.backgroundColor=colorPicker;
		}

	</script>

	<h1> Pixel Grid </h1>

	<label for="cw">Color Selector</label>
	<input id="cw" type="color">

	<button onclick="fillPaint()">Fill All</button>
	<button onclick="fillUncolored()">Fill Uncolored</button>
	<button onclick="fillWhite()">Clear</button>

	<table id="table">
		<tr> <!-- row -->
			<td id="1,1" onmouseover="paint(event); clickAndHover(event);"></td> <!-- cells within the row -->
			<td id="1,2" onmouseover="paint(event); clickAndHover(event);"></td>
		</tr>
		<tr>
			<td id="2,1" onmouseover="paint(event); clickAndHover(event);"></td>
			<td id="2,2" onmouseover="paint(event); clickAndHover(event);"></td>
		</tr>
	</table>

	<p>Note: Please press "Clear" once before pressing "Fill Uncolored"</p>
</html>